<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setup :: Template Tutorial</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/eap-on-openshift/03-build-with-helm.html">
    <link rel="prev" href="02-mta.html">
    <link rel="next" href="04-deploy-with-operator.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/course-template">Template Tutorial</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="eap-on-openshift" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-overview.html">Overview of JBoss EAP on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#benefits">Benefits of running JBoss EAP on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#cloud-native">Cloud native development</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#modernization">Modernization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#build">Building for OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#deployment">Deploying on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#clustering">Clustering JBoss EAP applications on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#autoscaling">Autoscaling applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#graceful-shutdown">Graceful shutdown</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#https">HTTPS configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-overview.html#platform-options">OpenShift platform options</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pre-reqs.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-mta.html">Migration Toolkit for Applications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-mta.html#installation">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-mta.html#cloud-readiness">Perform cloud readiness check</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-mta.html#the-report">Understanding the report</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-build-with-helm.html">Building JBoss EAP images with Helm</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#prereqs">Pre-requisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#connectdb">Configuring JBoss EAP to connect to the postgres database</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#build">Building JBoss EAP images with Helm</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#chained-builds">S2I chained builds</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#deploy">Application deployment with helm</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#testing">Testing the application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-deploy-with-operator.html">Deploying applications with the JBoss EAP Operator</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-deploy-with-operator.html#install">Installing the JBoss EAP Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-deploy-with-operator.html#deploy">Deploy JBoss EAP application with the operator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="05-intro-to-EAP-xp.html">Introduction to JBoss EAP XP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-intro-to-EAP-xp.html#xponopenshift">Deploying JBoss EAP XP applications on OpenShift</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-adding-microprofile.html">Adding MicroProfile support with JBoss EAP XP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-adding-microprofile.html#health">Adding a MicroProfile health check</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-adding-microprofile.html#build">Building a MicroProfile application image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-adding-microprofile.html#testing">Testing MicroProfile health implementation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="07-content-trimming.html">Using capability trimming to reduce image size</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07-content-trimming.html#implement">Implement capability trimming</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="08-observability.html">Observability and Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-observability.html#prometheus">Deploy prometheus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-observability.html#custom">Custom metrics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="09-whats-next.html">What&#8217;s next</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Re-platform JBoss EAP on OpenShift</a></li>
    <li><a href="03-build-with-helm.html">Building JBoss EAP images with Helm</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/deewhyweb/replatform-jboss-eap-openshift/edit/master/documentation/modules/ROOT/pages/03-build-with-helm.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Setup</h1>
<div class="sect1">
<h2 id="_building_for_openshift"><a class="anchor" href="#_building_for_openshift"></a>Building for OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section we&#8217;re going to deploy a sample JBoss EAP application which uses a Postgres database for persistence.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll use the JBoss EAP helm chart to create the build configs required to build the JBoss EAP runtime image.</p>
</div>
<div class="paragraph">
<p>Our initial helm chart will also deploy our application image and setup the external route, we&#8217;ll modify this later in the guide to use the JBoss EAP Operator to deploy the application image.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prereqs"><a class="anchor" href="#prereqs"></a>Pre-requisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we build and deploy our application we&#8217;re going to create a project and deploy the required postgres database.</p>
</div>
<div class="paragraph">
<p>To do this, login to OpenShift as a developer and switch to the developer-ui.</p>
</div>
<div class="paragraph">
<p>Click the Project drop-down menu to see a list of all available projects. Select Create Project</p>
</div>
<div class="paragraph">
<p>In the Create Project dialog box, enter a unique name, such as "eap", in the Name field.</p>
</div>
<div class="paragraph">
<p>Click Create.</p>
</div>
<div class="paragraph">
<p>Click on "+Add" on the left menu and then select "Database", choose the "PostgreSQL" template and then click on "Instantiate Template".  Fill out the form as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/postgresql.png" alt="postgresql">
</div>
</div>
<div class="paragraph">
<p>Click on "Create".  The postgres database will be deployed and available for connections.</p>
</div>
<div class="paragraph">
<p>Navigate to "Secrets" on the left menu.  Select the "postgresql" secret and click on "Reveal value".  This secret was created by the template.  We will use this secret in the configuration of the Helm deployment to provide credentials such as username / password.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connectdb"><a class="anchor" href="#connectdb"></a>Configuring JBoss EAP to connect to the postgres database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The appliction we are deploying needs to connect to the Postgres database instance.  To do this we need to add a module, driver, and jdbc jar file to our JBoss EAP deployment.</p>
</div>
<div class="paragraph">
<p>In traditional JBoss EAP deployments this would be done by running jboss.cli commands or configuration file (e.g. standalone.xml).  When deploying on OpenShift the S2I process will perform these configurations for us.</p>
</div>
<div class="paragraph">
<p>In our application source code repository (<a href="https://github.com/deewhyweb/wildfly-s2i-db/tree/legacy" class="bare">https://github.com/deewhyweb/wildfly-s2i-db/tree/legacy</a>) we have created two folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>extensions</p>
</li>
<li>
<p>modules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the extensions folder we added two files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>install.sh</p>
</li>
<li>
<p>drivers.env</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>install.sh contains the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#!/bin/bash
echo "Running install.sh"
echo ${injected_dir}
if [ "${SCRIPT_DEBUG}" = "true" ] ; then
    set -x
    echo "Script debugging is enabled, allowing bash commands and their arguments to be printed as they are executed"
fi

injected_dir=$1
source /usr/local/s2i/install-common.sh
configure_drivers ${injected_dir}/drivers.env</code></pre>
</div>
</div>
<div class="paragraph">
<p>This bash script will be executed by the S2I process during the initial build.  "drivers.env" is referenced by this script in the configure_drivers command.</p>
</div>
<div class="paragraph">
<p>drivers.env contains the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">#DRIVER
DRIVERS=POSTGRESQL
POSTGRESQL_DRIVER_NAME=postgresql
POSTGRESQL_DRIVER_MODULE=org.postgresql
POSTGRESQL_DRIVER_CLASS=org.postgresql.Driver
POSTGRESQL_XA_DATASOURCE_CLASS=org.postgresql.xa.PGXADataSource</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will configure a driver called "POSTGRESQL" which will use a module called "org.postresql"</p>
</div>
<div class="paragraph">
<p>The org.postgresql module is located in the "modules" folder.  The structure of the modules folder matches the java organization structure i.e.</p>
</div>
<div class="paragraph">
<p>modules &#8594; org &#8594; postgresql &#8594; main</p>
</div>
<div class="paragraph">
<p>In this folder the module.xml file is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;module xmlns="urn:jboss:module:1.0" name="org.postgresql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="postgresql-jdbc.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a module called "org.postresql" which references the postgresql jdbc driver, also located in the same folder.</p>
</div>
<div class="paragraph">
<p>The final step to configure the postgresql connection is to supply the connection informatioion for the environment i.e. username, password, connection url.  We will do this by providing environment variables at deployment time, allowing us to externalize our configuration, an important step towards cloud-native development.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build"><a class="anchor" href="#build"></a>Building JBoss EAP images with Helm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift provides JBoss EAP helm charts to assist with the build and deploy of JBoss EAP application images.</p>
</div>
<div class="paragraph">
<p>To build a JBoss EAP application image, login to OpenShift as a developer and switch to the developer-ui.  From the developer-ui go to "+Add" and then select "Helm Chart" under "Developer Catalog".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/helm1.png" alt="helm1">
</div>
</div>
<div class="paragraph">
<p>From the Helm Charts page enter "eap" in the "Filter by keyword" box.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/helm2.png" alt="helm2">
</div>
</div>
<div class="paragraph">
<p>Select "EAP74" from the filtered results.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/eap74.png" alt="eap74">
</div>
</div>
<div class="paragraph">
<p>Click on "Install Helm Chart"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/eap74-2.png" alt="eap74 2">
</div>
</div>
<div class="paragraph">
<p>Switch to "yaml view" and paste the following snippet</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">build:
  enabled: true
  env:
    - name: CUSTOM_INSTALL_DIRECTORIES
      value: extensions
  mode: s2i
  output:
    kind: ImageStreamTag
  ref: legacy
  s2i:
    amd64:
      jdk11:
        builderImage: registry.redhat.io/jboss-eap-7/eap74-openjdk11-openshift-rhel8
        runtimeImage: registry.redhat.io/jboss-eap-7/eap74-openjdk11-runtime-openshift-rhel8
      jdk8:
        builderImage: registry.redhat.io/jboss-eap-7/eap74-openjdk8-openshift-rhel7
        runtimeImage: registry.redhat.io/jboss-eap-7/eap74-openjdk8-runtime-openshift-rhel7
    arch: amd64
    jdk: '11'
    version: latest
  uri: 'https://github.com/deewhyweb/wildfly-s2i-db.git'
deploy:
  enabled: true
  env:
    - name: TEST_DATABASE
      valueFrom:
        secretKeyRef:
          key: database-name
          name: postgresql
    - name: TEST_PASSWORD
      valueFrom:
        secretKeyRef:
          key: database-password
          name: postgresql
    - name: TEST_USERNAME
      valueFrom:
        secretKeyRef:
          key: database-user
          name: postgresql
    - name: DATASOURCES
      value: TEST
    - name: TEST_DRIVER
      value: postgresql
    - name: TEST_JNDI
      value: 'java:/jdbc/postgresql'
    - name: TEST_NAME
      value: postgresql
    - name: TEST_URL
      value: 'jdbc:postgresql://postgresql:5432/demodb'
    - name: TEST_NONXA
      value: 'true'
  livenessProbe:
    exec:
      command:
        - /bin/bash
        - '-c'
        - /opt/eap/bin/livenessProbe.sh
    initialDelaySeconds: 60
  readinessProbe:
    exec:
      command:
        - /bin/bash
        - '-c'
        - /opt/eap/bin/readinessProbe.sh
    initialDelaySeconds: 10
  replicas: 1
  route:
    enabled: true
    tls:
      enabled: true
      insecureEdgeTerminationPolicy: Redirect
      termination: edge
image:
  tag: latest</code></pre>
</div>
</div>
<div class="paragraph">
<p>This yaml will configure the helm chart with the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The url of the git repo containing the application source code</p>
</li>
<li>
<p>The branch to checkout from git</p>
</li>
<li>
<p>Build time environment variable to configure an extensions folder</p>
</li>
<li>
<p>Runtime environment variables to configure the postgres database connection, to pull some of these from the secret</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Switch back to the form view and examine the options selected.</p>
</div>
<div class="paragraph">
<p>Click on "Install" to install the helm chart.</p>
</div>
<div class="paragraph">
<p>Once the helm chart is installed two build configs will be created.  Click on "Builds" to see build configs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/helm-bc.png" alt="helm bc">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chained-builds"><a class="anchor" href="#chained-builds"></a>S2I chained builds.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the helm chart is installed two build configs are created to perform the S2I build.</p>
</div>
<div class="paragraph">
<p>The first build performs the maven build, JBoss EAP configuration, and application deployment.  Once this is complete the second build is started automatically.</p>
</div>
<div class="paragraph">
<p>The second build takes the JBoss EAP installation created by the first build and builds a new image containing only the libraries required to run JBoss EAP and the JBoss EAP installation.  This two stage process results in a reduced image size for the final image.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/s2i-resources.png" alt="s2i resources">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy"><a class="anchor" href="#deploy"></a>Application deployment with helm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the builds are complete the application will be deployed.  Navigate to the topology view and you will see the deployed objects.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/deployed-app.png" alt="deployed app">
</div>
</div>
<div class="paragraph">
<p>Click on the route icon to open the url associated with the application.  You will see a response like:</p>
</div>
<div class="paragraph">
<p>"Re-platform JBoss EAP on OpenShift"</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing"><a class="anchor" href="#testing"></a>Testing the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This application is a simple RestFul application which allows the query and addition of developers to a database.</p>
</div>
<div class="paragraph">
<p>We&#8217;re going to test the application using curl, so the first thing we&#8217;ll need to do is login using the OpenShift cli.</p>
</div>
<div class="paragraph">
<p>To get the required token to login using the cli, from the top right menu select "Copy login command"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/login.png" alt="login">
</div>
</div>
<div class="paragraph">
<p>You may be prompted to login again, then click on "Display token".  Copy the text in the "Log in with this token" box and paste this into your terminal.</p>
</div>
<div class="paragraph">
<p>Make sure you&#8217;re on the correct project, if you are not, enter</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">oc project eap</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next we&#8217;ll need to find the route for our appliction.  To do this enter the following:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_mac-osx"></a>Mac OSX</p>
</li>
<li>
<p><a id="tabset1_linux"></a>Linux</p>
</li>
<li>
<p><a id="tabset1_windows"></a>Windows</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_mac-osx">
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export ROUTE_NAME=$(oc get route eap74 -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_linux">
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export ROUTE_NAME=$(oc get route eap74 -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_windows">
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">ROUTE_NAME=$(oc get route eap74 -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Test the route with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">curl https://$ROUTE_NAME</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have a working route, we can create entries in the database with the following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">curl -i -X POST https://$ROUTE_NAME/resources/developers -H "content-type: application/json" -d '{"name": "Anita", "surname": "Borg" }'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once this command completes you will see a response like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{"id":1,"name":"Anita","surname":"Borg"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To list the records, enter</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">curl https://$ROUTE_NAME/resources/developers</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We have successfully built JBoss EAP image and deployed this to OpenShift.</p>
</div>
<div class="paragraph">
<p>Next we will look at how to use the JBoss EAP operator to deploy the application.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="02-mta.html">Migration Toolkit for Applications</a></span>
  <span class="next"><a href="04-deploy-with-operator.html">Deploying applications with the JBoss EAP Operator</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
